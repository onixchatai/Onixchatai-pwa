import React, { useState, useEffect } from 'react';
import { ShoppingCart, MessageCircle, TrendingUp, Users, Star, Bell, Coffee, Donut, Award, Gift, Calendar, MapPin, Phone, DollarSign, BarChart3, Target, Zap, Menu, X, Play, ArrowRight, Check } from 'lucide-react';

const CompleteOnixChatAI = () => {
  const [currentView, setCurrentView] = useState('landing');
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  
  // Demo data
  const [orders, setOrders] = useState([
    { id: 1, customer: 'Sarah M.', items: 'Double Chocolate Donut x2', total: 8.50, status: 'preparing', time: '2 min ago' },
    { id: 2, customer: 'Mike R.', items: 'Coffee + Glazed Donut', total: 6.25, status: 'ready', time: '5 min ago' },
    { id: 3, customer: 'Lisa K.', items: 'Dozen Mixed Box', total: 18.99, status: 'delivered', time: '12 min ago' }
  ]);
  
  const [customerCart, setCustomerCart] = useState([]);
  const [chatMessages, setChatMessages] = useState([
    { sender: 'bot', text: 'Welcome to Sweet Treats Donuts! 🍩 How can I help you today?' }
  ]);
  const [loyaltyPoints, setLoyaltyPoints] = useState(847);
  const [weather] = useState('cold');
  
  const menuItems = [
    { id: 1, name: 'Classic Glazed', price: 2.50, category: 'donuts', popular: true },
    { id: 2, name: 'Double Chocolate', price: 3.25, category: 'donuts', special: true },
    { id: 3, name: 'Boston Cream', price: 3.50, category: 'donuts', popular: true },
    { id: 4, name: 'Hot Coffee', price: 2.75, category: 'drinks', weather: 'cold' },
    { id: 5, name: 'Iced Latte', price: 4.25, category: 'drinks', weather: 'hot' },
    { id: 6, name: 'Dozen Mixed Box', price: 18.99, category: 'bulk', group: true }
  ];

  const addToCart = (item) => {
    setCustomerCart([...customerCart, item]);
    if (item.category === 'donuts') {
      setChatMessages(prev => [...prev, 
        { sender: 'bot', text: `Great choice! ☕ Would you like to add our fresh hot coffee for just $2.75? Perfect with ${item.name}!` }
      ]);
    }
  };

  const removeFromCart = (index) => {
    setCustomerCart(customerCart.filter((_, i) => i !== index));
  };

  const getTotalPrice = () => {
    return customerCart.reduce((total, item) => total + item.price, 0).toFixed(2);
  };

  const sendChatMessage = (message) => {
    setChatMessages(prev => [...prev, { sender: 'user', text: message }]);
    
    setTimeout(() => {
      let response = '';
      if (message.toLowerCase().includes('special')) {
        response = 'Today\'s special is our Double Chocolate Donut! 🍫 Only 2 left and flying off the shelf!';
      } else if (message.toLowerCase().includes('hours')) {
        response = 'We\'re open 6AM-8PM daily! Currently open and fresh donuts every 2 hours! 🕕';
      } else if (message.toLowerCase().includes('loyalty')) {
        response = `You have ${loyaltyPoints} points! 🎉 You're only 153 points away from a FREE dozen box!`;
      } else {
        response = 'I\'m here to help! Ask me about our specials, hours, loyalty program, or place an order! 😊';
      }
      setChatMessages(prev => [...prev, { sender: 'bot', text: response }]);
    }, 1000);
  };

  // Landing Page Component
  const LandingPage = () => (
    <div className="min-h-screen bg-gray-50">
      {/* Navigation */}
      <nav className="bg-white shadow-sm border-b sticky top-0 z-50">
        <div className="max-w-7xl mx-auto px-4">
          <div className="flex justify-between items-center h-16">
            <div className="flex items-center gap-3">
              <div className="w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold text-xl">
                O
              </div>
              <div>
                <h1 className="text-xl font-bold text-gray-900">OnixChatAI</h1>
                <p className="text-xs text-gray-600">Smart Business Solutions</p>
              </div>
            </div>
            
            {/* Desktop Menu */}
            <div className="hidden md:flex items-center gap-6">
              <a href="#features" className="text-gray-600 hover:text-gray-900 transition-colors">Features</a>
              <a href="#pricing" className="text-gray-600 hover:text-gray-900 transition-colors">Pricing</a>
              <button 
                onClick={() => setCurrentView('platform')}
                className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2"
              >
                <Play className="w-4 h-4" />
                Live Demo
              </button>
            </div>

            {/* Mobile Menu Button */}
            <button 
              className="md:hidden"
              onClick={() => setIsMenuOpen(!isMenuOpen)}
            >
              {isMenuOpen ? <X className="w-6 h-6" /> : <Menu className="w-6 h-6" />}
            </button>
          </div>

          {/* Mobile Menu */}
          {isMenuOpen && (
            <div className="md:hidden border-t py-4">
              <div className="flex flex-col gap-4">
                <a href="#features" className="text-gray-600">Features</a>
                <a href="#pricing" className="text-gray-600">Pricing</a>
                <button 
                  onClick={() => setCurrentView('platform')}
                  className="bg-blue-600 text-white px-4 py-2 rounded-lg self-start"
                >
                  Live Demo
                </button>
              </div>
            </div>
          )}
        </div>
      </nav>

      {/* Hero Section */}
      <section className="bg-gradient-to-br from-blue-50 to-purple-50 py-20">
        <div className="max-w-7xl mx-auto px-4 text-center">
          <h1 className="text-5xl md:text-6xl font-bold text-gray-900 mb-6">
            Empower Your Small Business with{' '}
            <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">
              AI Intelligence
            </span>
          </h1>
          <p className="text-xl text-gray-600 mb-8 max-w-3xl mx-auto">
            Professional chatbots, mobile ordering, and smart marketing tools that help small businesses compete with enterprise-level solutions.
          </p>
          <div className="flex flex-col sm:flex-row gap-4 justify-center">
            <button 
              onClick={() => setCurrentView('platform')}
              className="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all transform hover:scale-105 flex items-center justify-center gap-2"
            >
              <Play className="w-5 h-5" />
              Try Live Demo
            </button>
            <button 
              onClick={() => window.open('tel:8183358825')}
              className="border-2 border-blue-600 text-blue-600 px-8 py-4 rounded-lg text-lg font-semibold hover:bg-blue-600 hover:text-white transition-all flex items-center justify-center gap-2"
            >
              <Phone className="w-5 h-5" />
              Call (818) 335-8825
            </button>
          </div>
        </div>
      </section>

      {/* Features Section */}
      <section id="features" className="py-20 bg-white">
        <div className="max-w-7xl mx-auto px-4">
          <h2 className="text-3xl font-bold text-center mb-12">Everything Your Business Needs</h2>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div className="text-center p-6 rounded-lg border hover:shadow-lg transition-shadow">
              <div className="w-16 h-16 bg-blue-100 rounded-lg mx-auto mb-4 flex items-center justify-center">
                <MessageCircle className="w-8 h-8 text-blue-600" />
              </div>
              <h3 className="text-xl font-bold mb-4">AI Chatbots</h3>
              <p className="text-gray-600">24/7 customer service, order taking, and smart upselling that never sleeps.</p>
            </div>
            <div className="text-center p-6 rounded-lg border hover:shadow-lg transition-shadow">
              <div className="w-16 h-16 bg-green-100 rounded-lg mx-auto mb-4 flex items-center justify-center">
                <ShoppingCart className="w-8 h-8 text-green-600" />
              </div>
              <h3 className="text-xl font-bold mb-4">Mobile Ordering</h3>
              <p className="text-gray-600">Professional ordering app that customers can install and use offline.</p>
            </div>
            <div className="text-center p-6 rounded-lg border hover:shadow-lg transition-shadow">
              <div className="w-16 h-16 bg-purple-100 rounded-lg mx-auto mb-4 flex items-center justify-center">
                <BarChart3 className="w-8 h-8 text-purple-600" />
              </div>
              <h3 className="text-xl font-bold mb-4">Smart Analytics</h3>
              <p className="text-gray-600">Real-time insights, customer behavior, and revenue optimization tools.</p>
            </div>
          </div>
        </div>
      </section>

      {/* Pricing Section */}
      <section id="pricing" className="py-20 bg-gray-50">
        <div className="max-w-7xl mx-auto px-4">
          <h2 className="text-3xl font-bold text-center mb-12">Simple, Transparent Pricing</h2>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {/* Starter Plan */}
            <div className="bg-white rounded-lg p-6 border hover:shadow-lg transition-shadow">
              <h3 className="text-xl font-bold mb-4">Starter</h3>
              <div className="text-3xl font-bold mb-4">$99<span className="text-lg text-gray-600">/month</span></div>
              <ul className="space-y-3 mb-6">
                <li className="flex items-center"><Check className="w-5 h-5 text-green-500 mr-2" /> Basic AI chatbot</li>
                <li className="flex items-center"><Check className="w-5 h-5 text-green-500 mr-2" /> Mobile ordering</li>
                <li className="flex items-center"><Check className="w-5 h-5 text-green-500 mr-2" /> Up to 100 orders/month</li>
                <li className="flex items-center"><Check className="w-5 h-5 text-green-500 mr-2" /> Email support</li>
              </ul>
              <button className="w-full bg-gray-600 text-white py-3 rounded-lg hover:bg-gray-700 transition-colors">
                Get Started
              </button>
            </div>
            
            {/* Professional Plan */}
            <div className="bg-white rounded-lg p-6 border-2 border-blue-600 relative hover:shadow-lg transition-shadow">
              <div className="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-1 rounded-full text-sm">
                Most Popular
              </div>
              <h3 className="text-xl font-bold mb-4">Professional</h3>
              <div className="text-3xl font-bold mb-4">$199<span className="text-lg text-gray-600">/month</span></div>
              <ul className="space-y-3 mb-6">
                <li className="flex items-center"><Check className="w-5 h-5 text-green-500 mr-2" /> Advanced AI with upselling</li>
                <li className="flex items-center"><Check className="w-5 h-5 text-green-500 mr-2" /> Custom mobile app</li>
                <li className="flex items-center"><Check className="w-5 h-5 text-green-500 mr-2" /> Up to 500 orders/month</li>
                <li className="flex items-center"><Check className="w-5 h-5 text-green-500 mr-2" /> Weather-based marketing</li>
                <li className="flex items-center"><Check className="w-5 h-5 text-green-500 mr-2" /> Phone support</li>
              </ul>
              <button className="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors">
                Start Free Trial
              </button>
            </div>
            
            {/* Enterprise Plan */}
            <div className="bg-white rounded-lg p-6 border hover:shadow-lg transition-shadow">
              <h3 className="text-xl font-bold mb-4">Enterprise</h3>
              <div className="text-3xl font-bold mb-4">$399<span className="text-lg text-gray-600">/month</span></div>
              <ul className="space-y-3 mb-6">
                <li className="flex items-center"><Check className="w-5 h-5 text-green-500 mr-2" /> Multi-location support</li>
                <li className="flex items-center"><Check className="w-5 h-5 text-green-500 mr-2" /> Custom integrations</li>
                <li className="flex items-center"><Check className="w-5 h-5 text-green-500 mr-2" /> Unlimited orders</li>
                <li className="flex items-center"><Check className="w-5 h-5 text-green-500 mr-2" /> Dedicated manager</li>
              </ul>
              <button className="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors">
                Contact Sales
              </button>
            </div>
          </div>
        </div>
      </section>

      {/* CTA Section */}
      <section className="py-20 bg-gradient-to-r from-blue-600 to-purple-600 text-white">
        <div className="max-w-4xl mx-auto px-4 text-center">
          <h2 className="text-3xl font-bold mb-6">Ready to Transform Your Business?</h2>
          <p className="text-xl mb-8 opacity-90">
            Join hundreds of small businesses already using OnixChatAI to compete with the big players.
          </p>
          <div className="flex flex-col sm:flex-row gap-4 justify-center">
            <button 
              onClick={() => setCurrentView('platform')}
              className="bg-white text-blue-600 px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-100 transition-colors flex items-center justify-center gap-2"
            >
              <Play className="w-5 h-5" />
              See Live Demo
            </button>
            <button 
              onClick={() => window.open('tel:8183358825')}
              className="border-2 border-white text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-white hover:text-blue-600 transition-all flex items-center justify-center gap-2"
            >
              <Phone className="w-5 h-5" />
              Call (818) 335-8825
            </button>
          </div>
        </div>
      </section>

      {/* Contact Section */}
      <section className="py-20 bg-gray-900 text-white">
        <div className="max-w-7xl mx-auto px-4">
          <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
              <div className="flex items-center gap-2 mb-4">
                <div className="w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold">
                  O
                </div>
                <span className="font-bold">OnixChatAI</span>
              </div>
              <p className="text-gray-400">Empowering small businesses with AI-powered solutions.</p>
              <div className="mt-4">
                <p className="text-sm text-gray-400">Proudly serving:</p>
                <p className="text-sm">Burbank, Glendale, North Hollywood</p>
                <p className="text-sm">Sherman Oaks & San Fernando Valley</p>
              </div>
            </div>
            <div>
              <h4 className="font-semibold mb-4">Contact Victor</h4>
              <ul className="space-y-2 text-gray-400">
                <li className="flex items-center gap-2">
                  <Phone className="w-4 h-4" />
                  <a href="tel:8183358825" className="hover:text-white transition-colors">(818) 335-8825</a>
                </li>
                <li className="flex items-center gap-2">
                  <MapPin className="w-4 h-4" />
                  Burbank, California
                </li>
                <li>📧 victor@onixchatai.com</li>
              </ul>
            </div>
            <div>
              <h4 className="font-semibold mb-4">Services</h4>
              <ul className="space-y-2 text-gray-400">
                <li>AI Chatbots</li>
                <li>Mobile Ordering Apps</li>
                <li>Smart Analytics</li>
                <li>Marketing Automation</li>
              </ul>
            </div>
            <div>
              <h4 className="font-semibold mb-4">Industries</h4>
              <ul className="space-y-2 text-gray-400">
                <li>Restaurants & Cafes</li>
                <li>Bakeries & Donut Shops</li>
                <li>Retail Stores</li>
                <li>Service Businesses</li>
              </ul>
            </div>
          </div>
          <div className="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
            <p>&copy; 2025 OnixChatAI. All rights reserved. | Built by Victor Sanchez</p>
          </div>
        </div>
      </section>
    </div>
  );

  // Platform Demo Components (from our previous SmartBiz platform)
  const DashboardView = () => (
    <div className="p-6 bg-gray-50 min-h-screen">
      <div className="max-w-7xl mx-auto">
        <div className="flex justify-between items-center mb-8">
          <h1 className="text-3xl font-bold text-gray-900">Sweet Treats Dashboard</h1>
          <div className="flex gap-4">
            <div className="bg-green-100 px-4 py-2 rounded-lg">
              <span className="text-green-800 font-semibold">🟢 Online</span>
            </div>
          </div>
        </div>

        {/* Stats Cards */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
          <div className="bg-white p-6 rounded-xl shadow-sm border">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-gray-600 text-sm">Today's Revenue</p>
                <p className="text-2xl font-bold text-green-600">$847.50</p>
                <p className="text-green-500 text-sm">↗ +23% vs yesterday</p>
              </div>
              <DollarSign className="w-8 h-8 text-green-500" />
            </div>
          </div>
          
          <div className="bg-white p-6 rounded-xl shadow-sm border">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-gray-600 text-sm">Active Orders</p>
                <p className="text-2xl font-bold text-blue-600">12</p>
                <p className="text-blue-500 text-sm">3 ready for pickup</p>
              </div>
              <ShoppingCart className="w-8 h-8 text-blue-500" />
            </div>
          </div>
          
          <div className="bg-white p-6 rounded-xl shadow-sm border">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-gray-600 text-sm">Happy Customers</p>
                <p className="text-2xl font-bold text-purple-600">4.8⭐</p>
                <p className="text-purple-500 text-sm">From 127 reviews</p>
              </div>
              <Star className="w-8 h-8 text-purple-500" />
            </div>
          </div>
          
          <div className="bg-white p-6 rounded-xl shadow-sm border">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-gray-600 text-sm">Local Buzz</p>
                <p className="text-2xl font-bold text-orange-600">High 🔥</p>
                <p className="text-orange-500 text-sm">15 nearby orders</p>
              </div>
              <TrendingUp className="w-8 h-8 text-orange-500" />
            </div>
          </div>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
          {/* Recent Orders */}
          <div className="bg-white rounded-xl shadow-sm border p-6">
            <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
              <ShoppingCart className="w-5 h-5" />
              Live Orders
            </h3>
            <div className="space-y-4">
              {orders.map(order => (
                <div 
